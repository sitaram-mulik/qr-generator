"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[981],{9981:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});var i=t(9950),n=t(6559),s=t(1129),l=t(3711),d=t(8796),c=t(7321),r=t(4666),p=t(4837),m=t(6057),u=t(6615),g=t(5532),h=t(4414);const x=[{id:1,name:"1 Year"},{id:2,name:"2 Year"},{id:3,name:"3 Year"}],o=()=>{const[e,a]=(0,i.useState)(""),[t,o]=(0,i.useState)(""),[v,A]=(0,i.useState)(""),[C,b]=(0,i.useState)(1),[y,j]=(0,i.useState)(!1),[f,w]=(0,i.useState)(!1),S=(0,n.Zp)(),{user:k}=(0,i.useContext)(g.c),{campaign:W}=(0,n.g)();(0,i.useEffect)((()=>{if(W){w(!0);(async()=>{try{const e=(await s.A.get("/campaigns/".concat(W))).data;a(e.name||""),o(e.title||""),A(e.description||""),b(e.validity||1)}catch(e){console.error("Failed to fetch campaign details",e)}})()}}),[W]);return(0,h.jsx)(l.A,{maxWidth:"md",sx:{mt:4},children:(0,h.jsxs)(d.A,{sx:{p:3},children:[(0,h.jsx)("h2",{children:f?"Edit Campaign":"Create new campaign"}),(0,h.jsx)(c.A,{sx:{gap:2,mb:4},children:(0,h.jsx)(r.A,{label:"Campaign Name",type:"text",id:"name",value:e,onChange:e=>a(e.target.value),required:!0,fullWidth:!0,disabled:f})}),(0,h.jsx)(c.A,{sx:{gap:2,mb:4},children:(0,h.jsx)(r.A,{label:"Title",type:"text",id:"title",value:t,onChange:e=>o(e.target.value),fullWidth:!0,disabled:!1})}),(0,h.jsx)(c.A,{sx:{gap:2,mb:4},children:(0,h.jsx)(r.A,{label:"Description",multiline:!0,fullWidth:!0,rows:4,id:"desc",value:v,onChange:e=>A(e.target.value),disabled:!1})}),(0,h.jsxs)(c.A,{sx:{gap:2,mb:2},children:[(0,h.jsx)(r.A,{select:!0,label:"Campaign validity *",value:C,onChange:e=>b(e.target.value),sx:{minWidth:300},disabled:f,children:x.map((e=>(0,h.jsx)(p.A,{value:e.id,children:e.name},e.id)))}),(0,h.jsxs)(m.A,{severity:"warning",sx:{mt:2},children:["Note: Assets created under this campaign will be deleted automatically"," ",k.gracePeriod," days after the Campaign validity ends."]})]}),(0,h.jsx)(u.A,{type:"primary",variant:"contained",onClick:async a=>{a.preventDefault(),j(!0);try{f?await s.A.put("/campaigns/update",{name:e,title:t,description:v}):await s.A.post("/campaigns/create",{name:e,validity:C,title:t,description:v}),S("/campaigns")}catch(i){j(!1)}},disabled:y,children:y?f?"Updating...":"Creating...":f?"Update Campaign":"Create Campaign"})]})})}}}]);