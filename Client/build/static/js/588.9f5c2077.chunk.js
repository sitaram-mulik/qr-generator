"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[588],{588:(e,t,s)=>{s.r(t),s.d(t,{default:()=>D});var n=s(9950),c=s(3711),a=s(7321),i=s(6503),r=s(8796),l=s(6615),o=s(6057),d=s(5269),h=s(7631),x=s(943),p=s(3588),m=s(8767),A=s(9172),j=s(1500),g=s(6559),u=s(1129),w=s(2026),y=s(8395),f=s(4414);const C=(0,y.A)((0,f.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");var k=s(9872),b=s(8024),v=s(5874),S=s(1672),E=s(9797),H=s(6952);const D=()=>{const[e,t]=(0,n.useState)([]),[s,y]=(0,n.useState)(!0),[D,I]=(0,n.useState)(!1),[M,z]=(0,n.useState)(""),[N,T]=(0,n.useState)(!1),[V,W]=(0,n.useState)(""),F=(0,g.Zp)();(0,n.useEffect)((()=>{L()}),[]);const L=async()=>{try{const e=await u.A.get("/campaigns");t(e.data),y(!1)}catch(e){z("Failed to load campaigns"),y(!1)}};return s?(0,f.jsx)(c.A,{maxWidth:"lg",sx:{mt:4},children:(0,f.jsx)(a.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:(0,f.jsx)(i.A,{})})}):(0,f.jsxs)(c.A,{maxWidth:"lg",sx:{mt:4,mb:4},children:[(0,f.jsxs)(r.A,{sx:{p:3,mb:3},children:[(0,f.jsx)(a.A,{sx:{pb:2,display:"flex",justifyContent:{xs:"flex-start",md:"flex-end"}},children:(0,f.jsx)(l.A,{startIcon:(0,f.jsx)(E.A,{}),onClick:()=>{F("/campaigns/action")},children:"Create"})}),M&&(0,f.jsx)(o.A,{severity:"error",sx:{mb:3},children:M}),0===e.length?(0,f.jsx)(o.A,{severity:"info",children:"No campaigns found. Create your first campaign to get started."}):(0,f.jsx)(d.A,{component:a.A,sx:{maxHeight:440},children:(0,f.jsxs)(h.A,{stickyHeader:!0,"aria-label":"campaign table",size:"small",children:[(0,f.jsx)(x.A,{children:(0,f.jsxs)(p.A,{children:[(0,f.jsx)(m.A,{children:"Name"}),(0,f.jsx)(m.A,{children:"UserId"}),(0,f.jsx)(m.A,{children:"Valid till"}),(0,f.jsx)(m.A,{children:"Created at"}),(0,f.jsx)(m.A,{children:"Assets"}),(0,f.jsx)(m.A,{children:"Edit"}),(0,f.jsx)(m.A,{children:"Delete"})]})}),(0,f.jsx)(A.A,{children:e.map((e=>{let{name:t,userId:s,validTill:n,createdAt:c,_id:a}=e;const i=(0,H.oP)(n);return(0,f.jsxs)(p.A,{hover:!0,sx:{backgroundColor:i?e=>e.palette.warning.main+"!important":"inherit","> td":{color:i?e=>e.palette.warning.contrastText:"inherit"},"&:hover":{backgroundColor:i?e=>e.palette.warning.dark+"!important":"inherit"}},children:[(0,f.jsx)(m.A,{component:"th",scope:"row",children:t}),(0,f.jsx)(m.A,{component:"th",scope:"row",children:s}),(0,f.jsx)(m.A,{component:"th",scope:"row",children:(0,w.E)(n)}),(0,f.jsx)(m.A,{component:"th",scope:"row",children:(0,w.E)(c)}),(0,f.jsx)(m.A,{component:"td",scope:"row",children:(0,f.jsx)(j.A,{color:"primary",onClick:()=>{F("/assets?campaign=".concat(t))},children:(0,f.jsx)(k.A,{})})}),(0,f.jsx)(m.A,{component:"th",scope:"row",children:(0,f.jsx)(j.A,{onClick:()=>F("/campaigns/action/".concat(t)),color:"primary",children:(0,f.jsx)(S.A,{})})}),(0,f.jsx)(m.A,{component:"td",scope:"row",children:(0,f.jsx)(j.A,{onClick:()=>(W(t),void T(!0)),color:"primary",children:(0,f.jsx)(C,{})})})]},a)}))})]})}),(0,f.jsx)(b.A,{show:N,onDeleteConfirm:async()=>{I(!0);try{await u.A.delete("/campaigns",{data:{campaignName:V}})}catch(M){console.log("Error deleting campaign:",M)}I(!1),T(!1),W(""),L()},message:"This action will delete all assets associated with this campaign permanently."})]}),(0,f.jsx)(v.A,{start:D})]})}},2026:(e,t,s)=>{s.d(t,{E:()=>n});const n=e=>new Date(e).toLocaleString()},9872:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(8395),c=s(4414);const a=(0,n.A)((0,c.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")}}]);