"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[588],{588:(e,s,t)=>{t.r(s),t.d(s,{default:()=>M});var n=t(9950),c=t(3711),a=t(7321),i=t(6503),r=t(8796),l=t(900),o=t(6615),d=t(6057),h=t(5269),x=t(7631),m=t(943),A=t(3588),p=t(8767),j=t(9172),g=t(1500),u=t(6559),y=t(1129),w=t(700),C=t(2026),f=t(8395),v=t(4414);const b=(0,f.A)((0,v.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");var k=t(9872),S=t(2076),E=t(8703),H=t(1672);const M=()=>{const[e,s]=(0,n.useState)([]),[t,f]=(0,n.useState)(!0),[M,D]=(0,n.useState)(!1),[z,N]=(0,n.useState)(""),[V,I]=(0,n.useState)(!1),[T,W]=(0,n.useState)(""),B=(0,u.Zp)();(0,n.useEffect)((()=>{F()}),[]);const F=async()=>{try{const e=await y.A.get("/campaigns");s(e.data),f(!1)}catch(e){N("Failed to load campaigns"),f(!1)}};return t?(0,v.jsx)(c.A,{maxWidth:"lg",sx:{mt:4},children:(0,v.jsx)(a.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:(0,v.jsx)(i.A,{})})}):(0,v.jsxs)(c.A,{maxWidth:"lg",sx:{mt:4,mb:4},children:[(0,v.jsxs)(r.A,{sx:{p:3,mb:3},children:[(0,v.jsx)(l.A,{variant:"h5",component:"h1",gutterBottom:!0,children:"My Campaigns"}),(0,v.jsx)(a.A,{sx:{mb:1},children:(0,v.jsx)(o.A,{variant:"contained",startIcon:(0,v.jsx)(w.A,{}),onClick:()=>{B("/campaigns/action")},sx:{mb:2},children:"Create campaign"})}),z&&(0,v.jsx)(d.A,{severity:"error",sx:{mb:3},children:z}),0===e.length?(0,v.jsx)(d.A,{severity:"info",children:"No campaigns found. Create your first campaign to get started."}):(0,v.jsx)(h.A,{component:a.A,sx:{maxHeight:440},children:(0,v.jsxs)(x.A,{stickyHeader:!0,"aria-label":"campaign table",size:"small",children:[(0,v.jsx)(m.A,{children:(0,v.jsxs)(A.A,{children:[(0,v.jsx)(p.A,{children:"Name"}),(0,v.jsx)(p.A,{children:"Valid till"}),(0,v.jsx)(p.A,{children:"Created at"}),(0,v.jsx)(p.A,{children:"Assets"}),(0,v.jsx)(p.A,{children:"Edit"}),(0,v.jsx)(p.A,{children:"Delete"})]})}),(0,v.jsx)(j.A,{children:e.map((e=>{let{name:s,validTill:t,createdAt:n,_id:c}=e;return(0,v.jsxs)(A.A,{hover:!0,children:[(0,v.jsx)(p.A,{component:"th",scope:"row",children:s}),(0,v.jsx)(p.A,{component:"th",scope:"row",children:(0,C.E)(t)}),(0,v.jsx)(p.A,{component:"th",scope:"row",children:(0,C.E)(n)}),(0,v.jsx)(p.A,{component:"td",scope:"row",children:(0,v.jsx)(g.A,{color:"primary",onClick:()=>{B("/assets?campaign=".concat(s))},children:(0,v.jsx)(k.A,{})})}),(0,v.jsx)(p.A,{component:"th",scope:"row",children:(0,v.jsx)(g.A,{onClick:()=>B("/campaigns/action/".concat(s)),color:"primary",children:(0,v.jsx)(H.A,{})})}),(0,v.jsx)(p.A,{component:"td",scope:"row",children:(0,v.jsx)(g.A,{onClick:()=>(W(s),void I(!0)),color:"primary",children:(0,v.jsx)(b,{})})})]},c)}))})]})}),(0,v.jsx)(S.A,{show:V,onDeleteConfirm:async()=>{D(!0);try{await y.A.delete("/campaigns",{data:{campaignName:T}})}catch(z){console.log("Error deleting campaign:",z)}D(!1),I(!1),W(""),F()},message:"This action will delete all assets associated with this campaign permanently."})]}),(0,v.jsx)(E.A,{start:M})]})}},2026:(e,s,t)=>{t.d(s,{E:()=>n});const n=e=>new Date(e).toLocaleString()},9872:(e,s,t)=>{t.d(s,{A:()=>a});var n=t(8395),c=t(4414);const a=(0,n.A)((0,c.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")}}]);